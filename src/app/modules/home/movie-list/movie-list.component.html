<div header="Movies">
  <p-table
    [value]="virtualMovies"
    [scrollable]="true"
    [scrollHeight]="'530px'"
    [rows]="4"
    [virtualScroll]="true"
    [virtualScrollItemSize]="360"
    [lazyLoadOnInit]="false"
    [lazy]="true"
    (onLazyLoad)="onLoadLazy($event)"
  >
    <ng-template pTemplate="body" let-rowOfMovies let-index="rowIndex">
      <tr>
        <td style="width: 25%" *ngFor="let movie of rowOfMovies">
          <div class="card m-3 border-1 surface-border">
            <a [routerLink]="['movie-id', movie.id, 'details']">
              <div
                class="flex flex-wrap gap-2 align-items-center justify-content-between mb-2"
              >
                <div class="flex align-items-center">
                  <span class="font-semibold">{{ movie.genre }}</span>
                </div>
              </div>
              <div class="flex flex-column align-items-center text-center mb-3">
                <img
                  [src]="movie.poster"
                  [alt]="movie.plot"
                  width="100"
                  height="150"
                  class="shadow-2 my-3 mx-0"
                />
                <div class="text-2xl font-bold">
                  {{ movie.title | abstractString }}
                </div>
                <div class="mb-3">{{ movie.year }}</div>
                <p-rating
                  [(ngModel)]="movie.imdbRating"
                  [stars]="10"
                  [readonly]="true"
                  [cancel]="false"
                ></p-rating>
              </div>
            </a>
          </div>
        </td>
      </tr>
    </ng-template>

    <ng-template pTemplate="loadingbody">
      <tr style="height: 360px">
        <td style="width: 25%" *ngFor="let movie of [0, 1, 2, 3]">
          <div class="card m-3 border-1 surface-border">
            <a>
              <div
                class="flex flex-wrap gap-2 align-items-center justify-content-between mb-2"
              >
                <div class="flex align-items-center">
                  <span class="font-semibold"
                    ><p-skeleton width="10rem" styleClass="mb-2"></p-skeleton
                  ></span>
                </div>
              </div>
              <div class="flex flex-column align-items-center text-center mb-3">
                <p-skeleton width="7rem" height="10rem"></p-skeleton>
                <div class="text-2xl font-bold">
                  <p-skeleton width="5rem" styleClass="mb-2"></p-skeleton>
                </div>
                <div class="mb-3">
                  <p-skeleton width="5rem" styleClass="mb-2"></p-skeleton>
                </div>
                <p-rating [stars]="10" [readonly]="true" [cancel]="false"
                  ><p-skeleton styleClass="mb-2"></p-skeleton
                ></p-rating>
              </div>
            </a>
          </div>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>
